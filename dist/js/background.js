chrome.runtime.onMessage.addListener(((e,t,o)=>("FETCH_PRICES"===e.type&&(async()=>{try{let t=e.ingredients;const r=e.ingredients.map((e=>e.name)),n=e.ll,c="https://serpapi.com/search",s="6cd5f8f67243095eb46d38c9579e86ca5b2074636e6b236d906299e613b517ae";for(let e=0;e<t.length;e++)try{const o=`${c}?engine=google_shopping&ll=${n}&q=${encodeURIComponent(r[e])}&api_key=${s}&output=JSON`,a=await fetch(o),i=await a.json(),p=i?.shopping_results?.map((e=>e.extracted_price));t[e].price=p[0]}catch(o){console.error("Error",o),t[e].price=0}console.log(t),o({ingredients:t})}catch(e){console.error("It broke"),o([])}})(),!0)));