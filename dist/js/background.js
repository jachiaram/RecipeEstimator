chrome.runtime.onMessage.addListener((async(e,r,t)=>{if("FETCH_PRICES"===e.type)return(async()=>{try{let r=e.ingredients;const n=e.ingredients.map((e=>e.name)),o=e.ll,c="https://serpapi.com/search",s="6cd5f8f67243095eb46d38c9579e86ca5b2074636e6b236d906299e613b517ae";for(let e=0;e<r.length;e++)try{const t=`${c}?engine=google_shopping&ll=${o}&q=${encodeURIComponent(n[e])}&api_key=${s}&output=JSON`,a=await fetch(t),i=await a.json(),p=i?.shopping_results?.map((e=>e.extracted_price));r[e].price=p[0]}catch(t){console.error("Error",t),r[e].price=0}console.log(r),t({ingredients:r})}catch(e){console.error("It broke"),t([])}})(),!0}));